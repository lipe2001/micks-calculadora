<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Editar venda</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <main class="container">
    <header class="brand card sales-header">
      <div>
        <h1 class="page-title"><i class="bi bi-pencil-square"></i> Editar venda #{{ sale.id }}</h1>
        <p class="subtitle">Altere os dados do cliente e dos dispositivos contratados.</p>
      </div>
      <div class="sales-actions">
        <a class="btn-ghost" href="/vendas"><i class="bi bi-arrow-left"></i> Voltar para vendas</a>
      </div>
    </header>

    {% if error %}<p class="error-text">{{ error }}</p>{% endif %}

    <form class="card" method="post" action="/vendas/{{ sale.id }}/editar">
      <div class="grid sales-grid">
        <label><span class="icon-label"><i class="bi bi-person"></i> Nome</span><input class="uppercase-input" type="text" name="name" minlength="2" maxlength="120" required value="{{ sale.name }}" /></label>
        <label><span class="icon-label"><i class="bi bi-envelope"></i> E-mail</span><input type="email" name="email" required value="{{ sale.email }}" /></label>
        <label><span class="icon-label"><i class="bi bi-telephone"></i> Telefone</span><input type="text" name="phone" minlength="8" maxlength="40" required value="{{ sale.phone }}" /></label>
        {% for key, label in device_labels.items() %}
        <label><span class="icon-label"><i class="bi bi-device-hdd"></i> {{ label }}</span><input type="number" min="0" name="{{ key }}" value="{{ sale.devices.get(key, 0) }}" /></label>
        {% endfor %}
      </div>
      <label class="check"><input type="checkbox" name="gamer" {% if sale.gamer %}checked{% endif %} /> Cliente gamer</label>
      <button type="submit"><i class="bi bi-check-circle"></i> Salvar alterações</button>
    </form>
  </main>
</body>
</html>
